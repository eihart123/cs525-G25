/**
 * @license
 * Copyright 2022-2025 Matter.js Authors
 * SPDX-License-Identifier: Apache-2.0
 */
import { ContiguousOutputSegment } from "./contiguous-output-segment.js";
import { Producer } from "./producer.js";
import { SgrOpcode } from "./sgr.js";
import { Style } from "./style.js";
import { tokenize } from "./tokenize.js";
const DEFAULT_TAB_WIDTH = 4;
class TextWriter {
  tabWidth;
  #terminalWidth;
  #currentLineWidth = 0;
  #out;
  #activeStyle = Style.Inherit;
  #styleDirty = true;
  #currentStyle = Style.Inherit;
  #linePrefix;
  #state;
  #styleEnabled = true;
  #isNewLine = true;
  #buffer;
  #revertHandlers;
  constructor(out, options) {
    const { tabWidth, terminalWidth, linePrefix } = options ?? {};
    this.#out = out;
    this.tabWidth = tabWidth ?? DEFAULT_TAB_WIDTH;
    this.#terminalWidth = terminalWidth;
    if (linePrefix) {
      this.#linePrefix = new ContiguousOutputSegment(...tokenize(linePrefix));
    }
    const self = this;
    this.#state = function state(options2, executor) {
      options2 = { ...options2 };
      const revertTo = { ...self.state, options: options2 };
      const { linePrefix: linePrefix2, style, buffer } = options2;
      if (linePrefix2) {
        if (self.#linePrefix) {
          self.#linePrefix.push(linePrefix2);
        } else {
          self.#linePrefix = new ContiguousOutputSegment(linePrefix2);
        }
      }
      if (style) {
        if (self.#currentStyle) {
          self.#currentStyle = self.#currentStyle.addStyle(style);
        } else {
          self.#currentStyle = style;
        }
        self.#styleDirty = true;
      }
      if (!!buffer !== !!self.#buffer) {
        if (buffer) {
          self.#buffer = [];
        } else {
          self.#buffer = void 0;
        }
      }
      const context = {
        close() {
          if (self.#revertHandlers) {
            for (const fn of self.#revertHandlers) {
              fn();
            }
          }
          if (revertTo.style) {
            revertTo.style = self.#currentStyle.undoStyle.addStyle(revertTo.style);
          } else {
            revertTo.style = Style.None;
          }
          for (const key in revertTo) {
            self.state[key] = revertTo[key];
          }
        },
        [Symbol.dispose]() {
          this.close();
        }
      };
      if (executor) {
        try {
          executor();
        } finally {
          context.close();
        }
      } else {
        return context;
      }
    };
    Object.defineProperties(this.#state, {
      style: {
        get() {
          return self.#currentStyle;
        },
        set(style) {
          self.#currentStyle = style ?? Style.Inherit;
          self.#styleDirty = true;
        },
        enumerable: true
      },
      linePrefix: {
        get() {
          return self.#linePrefix?.toString();
        },
        set(prefix) {
          if (prefix) {
            self.#linePrefix = new ContiguousOutputSegment(...tokenize(prefix));
          } else {
            self.#linePrefix = void 0;
          }
        },
        enumerable: true
      },
      terminalWidth: {
        get() {
          return self.#terminalWidth;
        },
        set(width) {
          self.#terminalWidth = width;
        },
        enumerable: true
      },
      styleEnabled: {
        get() {
          return self.#styleEnabled;
        },
        set(enabled) {
          self.#styleEnabled = enabled;
        },
        enumerable: true
      },
      availableWidth: {
        get() {
          if (self.#terminalWidth === void 0) {
            return void 0;
          }
          if (self.#linePrefix) {
            const width = self.#terminalWidth - self.#linePrefix.width;
            if (width > 0) {
              return width;
            }
            return void 0;
          }
          return self.#terminalWidth;
        }
      },
      remainingWidth: {
        get() {
          if (self.#terminalWidth === void 0) {
            return void 0;
          }
          return self.#terminalWidth - self.#currentLineWidth;
        }
      },
      buffer: {
        get() {
          return !!self.#buffer;
        },
        set(buffering) {
          if (!!self.#buffer === buffering) {
            return;
          }
          if (buffering) {
            self.#buffer = [];
            return;
          }
          if (self.#buffer) {
            self.#out(self.#buffer.join(""));
            self.#buffer = void 0;
          }
        },
        enumerable: true
      },
      onRevert: {
        value(fn) {
          if (!self.#revertHandlers) {
            self.#revertHandlers = /* @__PURE__ */ new Set();
          }
          self.#revertHandlers.add(fn);
        }
      },
      offRevert: {
        value(fn) {
          if (self.#revertHandlers) {
            self.#revertHandlers.add(fn);
          }
        }
      }
    });
  }
  get state() {
    return this.#state;
  }
  write(...text) {
    for (const token of Producer.of(text)) {
      this.#addToken(token);
    }
  }
  close() {
    this.#writeStyle();
  }
  /**
   * Reset styling.
   */
  reset() {
    if (this.#currentStyle.styleCodes.find((code) => code !== SgrOpcode.reset)) {
      this.#currentStyle = Style.None;
      this.#styleDirty = true;
    }
  }
  #addToken(token, forLinePrefix = false) {
    if (this.#isNewLine && this.#linePrefix && !forLinePrefix) {
      this.#isNewLine = false;
      const style = this.#currentStyle;
      this.#currentStyle = Style.None;
      this.#styleDirty = true;
      for (const token2 of this.#linePrefix.tokens) {
        this.#addToken(token2, true);
      }
      this.#currentStyle = style;
      this.#styleDirty = true;
    }
    switch (token.kind) {
      case "newline":
        this.#emitLine("\n");
        break;
      case "carriage-return":
        this.#emitLine("\r");
        break;
      case "tab":
        let width = this.tabWidth - this.#currentLineWidth % this.tabWidth;
        if (width === 0) {
          width = this.tabWidth;
        }
        this.#writeText("".padStart(width));
        this.#currentLineWidth += width;
        break;
      case "breaking":
        this.#writeText(token.str);
        this.#currentLineWidth += token.width;
        break;
      case "style":
        this.#currentStyle = this.#currentStyle.addStyle(token.style);
        this.#styleDirty = true;
        break;
      case "ansi":
        if (this.#styleEnabled) {
          this.#writeText(token.sequence);
        }
        if (token.newColumn !== void 0) {
          if (!this.#currentLineWidth) {
            this.#isNewLine = true;
          }
          this.#currentLineWidth = token.newColumn;
        }
        break;
      case "nonbreaking":
        this.#writeText(token.str);
        this.#currentLineWidth += token.width;
        break;
    }
  }
  #writeText(text) {
    this.#writeStyle();
    this.#emit(text);
  }
  #writeStyle() {
    if (this.#styleDirty && this.#styleEnabled) {
      this.#styleDirty = false;
      this.#emit(this.#activeStyle.diffStyle(this.#currentStyle).toString());
      this.#activeStyle = this.#currentStyle;
    }
  }
  #emit(text) {
    if (this.#buffer) {
      this.#buffer.push(text);
    } else {
      this.#out(text);
    }
  }
  #emitLine(terminator) {
    this.#writeStyle();
    this.#beginLine();
    if (terminator) {
      this.#emit(terminator);
    }
  }
  #beginLine() {
    this.#isNewLine = true;
    this.#currentLineWidth = 0;
  }
}
export {
  TextWriter
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL2Fuc2ktdGV4dC90ZXh0LXdyaXRlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjItMjAyNSBNYXR0ZXIuanMgQXV0aG9yc1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBDb25zdW1lciB9IGZyb20gXCIuL2NvbnN1bWVyLmpzXCI7XG5pbXBvcnQgeyBDb250aWd1b3VzT3V0cHV0U2VnbWVudCB9IGZyb20gXCIuL2NvbnRpZ3VvdXMtb3V0cHV0LXNlZ21lbnQuanNcIjtcbmltcG9ydCB7IFByb2R1Y2VyIH0gZnJvbSBcIi4vcHJvZHVjZXIuanNcIjtcbmltcG9ydCB7IFNnck9wY29kZSB9IGZyb20gXCIuL3Nnci5qc1wiO1xuaW1wb3J0IHsgU3R5bGUgfSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHsgVG9rZW4gfSBmcm9tIFwiLi90b2tlbi5qc1wiO1xuaW1wb3J0IHsgdG9rZW5pemUgfSBmcm9tIFwiLi90b2tlbml6ZS5qc1wiO1xuXG5jb25zdCBERUZBVUxUX1RBQl9XSURUSCA9IDQ7XG5cbi8qKlxuICogTG93LWxldmVsIHRleHQgb3V0cHV0IHdpdGggQU5TSSBlc2NhcGUgc2VxdWVuY2VzLCBtYWludGFpbmluZyBzdGF0ZSByZWdhcmRpbmcgc3R5bGUgYW5kIHdpZHRoIG9mIGN1cnJlbnQgbGluZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFRleHRXcml0ZXIgaW1wbGVtZW50cyBDb25zdW1lciB7XG4gICAgdGFiV2lkdGg6IG51bWJlcjtcblxuICAgICN0ZXJtaW5hbFdpZHRoPzogbnVtYmVyO1xuICAgICNjdXJyZW50TGluZVdpZHRoID0gMDtcbiAgICAjb3V0OiAodGV4dDogc3RyaW5nKSA9PiB2b2lkO1xuICAgICNhY3RpdmVTdHlsZSA9IFN0eWxlLkluaGVyaXQ7XG4gICAgI3N0eWxlRGlydHkgPSB0cnVlO1xuICAgICNjdXJyZW50U3R5bGUgPSBTdHlsZS5Jbmhlcml0O1xuICAgICNsaW5lUHJlZml4PzogQ29udGlndW91c091dHB1dFNlZ21lbnQ7XG4gICAgI3N0YXRlOiBDb25zdW1lci5TdGF0ZTtcbiAgICAjc3R5bGVFbmFibGVkID0gdHJ1ZTtcbiAgICAjaXNOZXdMaW5lID0gdHJ1ZTtcbiAgICAjYnVmZmVyPzogc3RyaW5nW107XG4gICAgI3JldmVydEhhbmRsZXJzPzogU2V0PCgpID0+IHZvaWQ+O1xuXG4gICAgY29uc3RydWN0b3Iob3V0OiAodGV4dDogc3RyaW5nKSA9PiB2b2lkLCBvcHRpb25zPzogV3JpdGVyLk9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyB0YWJXaWR0aCwgdGVybWluYWxXaWR0aCwgbGluZVByZWZpeCB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy4jb3V0ID0gb3V0O1xuICAgICAgICB0aGlzLnRhYldpZHRoID0gdGFiV2lkdGggPz8gREVGQVVMVF9UQUJfV0lEVEg7XG4gICAgICAgIHRoaXMuI3Rlcm1pbmFsV2lkdGggPSB0ZXJtaW5hbFdpZHRoO1xuICAgICAgICBpZiAobGluZVByZWZpeCkge1xuICAgICAgICAgICAgdGhpcy4jbGluZVByZWZpeCA9IG5ldyBDb250aWd1b3VzT3V0cHV0U2VnbWVudCguLi50b2tlbml6ZShsaW5lUHJlZml4KSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLiNzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKG9wdGlvbnM/OiBDb25zdW1lci5PcHRpb25zLCBleGVjdXRvcj86ICgpID0+IHZvaWQpOiBDb25zdW1lci5Db250ZXh0IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcblxuICAgICAgICAgICAgY29uc3QgcmV2ZXJ0VG8gPSB7IC4uLnNlbGYuc3RhdGUsIG9wdGlvbnMgfSBhcyBDb25zdW1lci5PcHRpb25zO1xuXG4gICAgICAgICAgICBjb25zdCB7IGxpbmVQcmVmaXgsIHN0eWxlLCBidWZmZXIgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICBpZiAobGluZVByZWZpeCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLiNsaW5lUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuI2xpbmVQcmVmaXgucHVzaChsaW5lUHJlZml4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiNsaW5lUHJlZml4ID0gbmV3IENvbnRpZ3VvdXNPdXRwdXRTZWdtZW50KGxpbmVQcmVmaXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuI2N1cnJlbnRTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiNjdXJyZW50U3R5bGUgPSBzZWxmLiNjdXJyZW50U3R5bGUuYWRkU3R5bGUoc3R5bGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuI2N1cnJlbnRTdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxmLiNzdHlsZURpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEhYnVmZmVyICE9PSAhIXNlbGYuI2J1ZmZlcikge1xuICAgICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4jYnVmZmVyID0gW107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4jYnVmZmVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICBjbG9zZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuI3JldmVydEhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZuIG9mIHNlbGYuI3JldmVydEhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXZlcnRUby5zdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0VG8uc3R5bGUgPSBzZWxmLiNjdXJyZW50U3R5bGUudW5kb1N0eWxlLmFkZFN0eWxlKHJldmVydFRvLnN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmVydFRvLnN0eWxlID0gU3R5bGUuTm9uZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJldmVydFRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi5zdGF0ZSBhcyBhbnkpW2tleV0gPSAocmV2ZXJ0VG8gYXMgYW55KVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIFtTeW1ib2wuZGlzcG9zZV0oKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGV4ZWN1dG9yKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0b3IoKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBhcyBDb25zdW1lci5TdGF0ZTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLiNzdGF0ZSwge1xuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBnZXQodGhpczogbmV2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuI2N1cnJlbnRTdHlsZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgc2V0KHRoaXM6IG5ldmVyLCBzdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiNjdXJyZW50U3R5bGUgPSBzdHlsZSA/PyBTdHlsZS5Jbmhlcml0O1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiNzdHlsZURpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxpbmVQcmVmaXg6IHtcbiAgICAgICAgICAgICAgICBnZXQodGhpczogbmV2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuI2xpbmVQcmVmaXg/LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHNldCh0aGlzOiBuZXZlciwgcHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuI2xpbmVQcmVmaXggPSBuZXcgQ29udGlndW91c091dHB1dFNlZ21lbnQoLi4udG9rZW5pemUocHJlZml4KSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiNsaW5lUHJlZml4ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB0ZXJtaW5hbFdpZHRoOiB7XG4gICAgICAgICAgICAgICAgZ2V0KHRoaXM6IG5ldmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLiN0ZXJtaW5hbFdpZHRoO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBzZXQodGhpczogbmV2ZXIsIHdpZHRoOiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4jdGVybWluYWxXaWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgc3R5bGVFbmFibGVkOiB7XG4gICAgICAgICAgICAgICAgZ2V0KHRoaXM6IG5ldmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLiNzdHlsZUVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHNldCh0aGlzOiBuZXZlciwgZW5hYmxlZDogYm9vbGVhbikge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiNzdHlsZUVuYWJsZWQgPSBlbmFibGVkO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgYXZhaWxhYmxlV2lkdGg6IHtcbiAgICAgICAgICAgICAgICBnZXQodGhpczogbmV2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuI3Rlcm1pbmFsV2lkdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLiNsaW5lUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IHNlbGYuI3Rlcm1pbmFsV2lkdGggLSBzZWxmLiNsaW5lUHJlZml4LndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi4jdGVybWluYWxXaWR0aDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcmVtYWluaW5nV2lkdGg6IHtcbiAgICAgICAgICAgICAgICBnZXQodGhpczogbmV2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuI3Rlcm1pbmFsV2lkdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi4jdGVybWluYWxXaWR0aCAtIHNlbGYuI2N1cnJlbnRMaW5lV2lkdGg7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGJ1ZmZlcjoge1xuICAgICAgICAgICAgICAgIGdldCh0aGlzOiBuZXZlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFzZWxmLiNidWZmZXI7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHNldCh0aGlzOiBuZXZlciwgYnVmZmVyaW5nOiBib29sZWFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXNlbGYuI2J1ZmZlciA9PT0gYnVmZmVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4jYnVmZmVyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuI2J1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4jb3V0KHNlbGYuI2J1ZmZlci5qb2luKFwiXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuI2J1ZmZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgb25SZXZlcnQ6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZShmbjogKCkgPT4gdm9pZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuI3JldmVydEhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiNyZXZlcnRIYW5kbGVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZWxmLiNyZXZlcnRIYW5kbGVycy5hZGQoZm4pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBvZmZSZXZlcnQ6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZShmbjogKCkgPT4gdm9pZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi4jcmV2ZXJ0SGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuI3JldmVydEhhbmRsZXJzLmFkZChmbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuXG4gICAgd3JpdGUoLi4udGV4dDogUHJvZHVjZXIuU2VxdWVuY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBQcm9kdWNlci5vZih0ZXh0KSkge1xuICAgICAgICAgICAgdGhpcy4jYWRkVG9rZW4odG9rZW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI3dyaXRlU3R5bGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBzdHlsaW5nLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICBpZiAodGhpcy4jY3VycmVudFN0eWxlLnN0eWxlQ29kZXMuZmluZChjb2RlID0+IGNvZGUgIT09IFNnck9wY29kZS5yZXNldCkpIHtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRTdHlsZSA9IFN0eWxlLk5vbmU7XG4gICAgICAgICAgICB0aGlzLiNzdHlsZURpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICNhZGRUb2tlbih0b2tlbjogVG9rZW4sIGZvckxpbmVQcmVmaXggPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy4jaXNOZXdMaW5lICYmIHRoaXMuI2xpbmVQcmVmaXggJiYgIWZvckxpbmVQcmVmaXgpIHtcbiAgICAgICAgICAgIHRoaXMuI2lzTmV3TGluZSA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLiNjdXJyZW50U3R5bGU7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50U3R5bGUgPSBTdHlsZS5Ob25lO1xuICAgICAgICAgICAgdGhpcy4jc3R5bGVEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRoaXMuI2xpbmVQcmVmaXgudG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYWRkVG9rZW4odG9rZW4sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jY3VycmVudFN0eWxlID0gc3R5bGU7XG4gICAgICAgICAgICB0aGlzLiNzdHlsZURpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAodG9rZW4ua2luZCkge1xuICAgICAgICAgICAgY2FzZSBcIm5ld2xpbmVcIjpcbiAgICAgICAgICAgICAgICB0aGlzLiNlbWl0TGluZShcIlxcblwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcImNhcnJpYWdlLXJldHVyblwiOlxuICAgICAgICAgICAgICAgIHRoaXMuI2VtaXRMaW5lKFwiXFxyXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwidGFiXCI6XG4gICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gdGhpcy50YWJXaWR0aCAtICh0aGlzLiNjdXJyZW50TGluZVdpZHRoICUgdGhpcy50YWJXaWR0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy50YWJXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jd3JpdGVUZXh0KFwiXCIucGFkU3RhcnQod2lkdGgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50TGluZVdpZHRoICs9IHdpZHRoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwiYnJlYWtpbmdcIjpcbiAgICAgICAgICAgICAgICB0aGlzLiN3cml0ZVRleHQodG9rZW4uc3RyKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50TGluZVdpZHRoICs9IHRva2VuLndpZHRoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50U3R5bGUgPSB0aGlzLiNjdXJyZW50U3R5bGUuYWRkU3R5bGUodG9rZW4uc3R5bGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0eWxlRGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwiYW5zaVwiOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNzdHlsZUVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jd3JpdGVUZXh0KHRva2VuLnNlcXVlbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLm5ld0NvbHVtbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBkb24ndCBuZWVkIHRvIHN1cHBvcnQgeWV0IGJ1dCB0byBiZSBjb3JyZWN0IHNob3VsZCBhZGp1c3Qgc2VxdWVuY2UgdG8gYWNjb3VudCBmb3IgaW5kZW50XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy4jY3VycmVudExpbmVXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jaXNOZXdMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50TGluZVdpZHRoID0gdG9rZW4ubmV3Q29sdW1uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcIm5vbmJyZWFraW5nXCI6XG4gICAgICAgICAgICAgICAgdGhpcy4jd3JpdGVUZXh0KHRva2VuLnN0cik7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudExpbmVXaWR0aCArPSB0b2tlbi53aWR0aDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgICN3cml0ZVRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuI3dyaXRlU3R5bGUoKTtcbiAgICAgICAgdGhpcy4jZW1pdCh0ZXh0KTtcbiAgICB9XG5cbiAgICAjd3JpdGVTdHlsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0eWxlRGlydHkgJiYgdGhpcy4jc3R5bGVFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLiNzdHlsZURpcnR5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuI2VtaXQodGhpcy4jYWN0aXZlU3R5bGUuZGlmZlN0eWxlKHRoaXMuI2N1cnJlbnRTdHlsZSkudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgICAgIHRoaXMuI2FjdGl2ZVN0eWxlID0gdGhpcy4jY3VycmVudFN0eWxlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgI2VtaXQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlci5wdXNoKHRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4jb3V0KHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgI2VtaXRMaW5lKHRlcm1pbmF0b3I/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy4jd3JpdGVTdHlsZSgpO1xuICAgICAgICB0aGlzLiNiZWdpbkxpbmUoKTtcbiAgICAgICAgaWYgKHRlcm1pbmF0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuI2VtaXQodGVybWluYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAjYmVnaW5MaW5lKCkge1xuICAgICAgICB0aGlzLiNpc05ld0xpbmUgPSB0cnVlO1xuICAgICAgICB0aGlzLiNjdXJyZW50TGluZVdpZHRoID0gMDtcbiAgICB9XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgV3JpdGVyIHtcbiAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbnMge1xuICAgICAgICB0YWJXaWR0aD86IG51bWJlcjtcbiAgICAgICAgdGVybWluYWxXaWR0aD86IG51bWJlcjtcbiAgICAgICAgbGluZVByZWZpeD86IHN0cmluZztcbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0EsU0FBUywrQkFBK0I7QUFDeEMsU0FBUyxnQkFBZ0I7QUFDekIsU0FBUyxpQkFBaUI7QUFDMUIsU0FBUyxhQUFhO0FBRXRCLFNBQVMsZ0JBQWdCO0FBRXpCLE1BQU0sb0JBQW9CO0FBS25CLE1BQU0sV0FBK0I7QUFBQSxFQUN4QztBQUFBLEVBRUE7QUFBQSxFQUNBLG9CQUFvQjtBQUFBLEVBQ3BCO0FBQUEsRUFDQSxlQUFlLE1BQU07QUFBQSxFQUNyQixjQUFjO0FBQUEsRUFDZCxnQkFBZ0IsTUFBTTtBQUFBLEVBQ3RCO0FBQUEsRUFDQTtBQUFBLEVBQ0EsZ0JBQWdCO0FBQUEsRUFDaEIsYUFBYTtBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsRUFFQSxZQUFZLEtBQTZCLFNBQTBCO0FBQy9ELFVBQU0sRUFBRSxVQUFVLGVBQWUsV0FBVyxJQUFJLFdBQVcsQ0FBQztBQUM1RCxTQUFLLE9BQU87QUFDWixTQUFLLFdBQVcsWUFBWTtBQUM1QixTQUFLLGlCQUFpQjtBQUN0QixRQUFJLFlBQVk7QUFDWixXQUFLLGNBQWMsSUFBSSx3QkFBd0IsR0FBRyxTQUFTLFVBQVUsQ0FBQztBQUFBLElBQzFFO0FBRUEsVUFBTSxPQUFPO0FBRWIsU0FBSyxTQUFTLFNBQVMsTUFBTUEsVUFBNEIsVUFBcUQ7QUFDMUcsTUFBQUEsV0FBVSxFQUFFLEdBQUdBLFNBQVE7QUFFdkIsWUFBTSxXQUFXLEVBQUUsR0FB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
