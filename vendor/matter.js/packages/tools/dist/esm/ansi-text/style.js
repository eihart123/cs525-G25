/**
 * @license
 * Copyright 2022-2025 Matter.js Authors
 * SPDX-License-Identifier: Apache-2.0
 */
import {
  Color,
  ExtendedColor,
  SgrCategory,
  SgrOpcode,
  SgrOpcodeBlock,
  SgrOpcodeToCategory,
  SgrOpcodeToUndoOpcode
} from "./sgr.js";
const codes = Symbol("codes");
const text = Symbol("text");
function Style(definition) {
  if (definition instanceof Style) {
    return definition;
  }
  const style = Object.create(Style.prototype);
  style.styleDefinition = Style.definitionOf(definition);
  return style;
}
((Style2) => {
  function opcodeOf(code) {
    if (typeof code === "number") {
      return code;
    }
    if (code === "") {
      return 0;
    }
    const opcode = Number.parseInt(code);
    if (Number.isNaN(opcode)) {
      return void 0;
    }
    return opcode;
  }
  Style2.opcodeOf = opcodeOf;
  function codesOf(definition) {
    definition = textOf(definition);
    if (definition === void 0) {
      return [];
    }
    if (definition === "") {
      return [0];
    }
    const parts = definition.split(";");
    const codes2 = Array();
    let pos = 0;
    while (pos < parts.length) {
      const part = parts[pos];
      const opcode = opcodeOf(parts[pos]);
      pos++;
      let expectedParts;
      switch (opcode) {
        case SgrOpcodeBlock.fg + Color.extended:
        case SgrOpcodeBlock.bg + Color.extended:
          switch (opcodeOf(parts[pos])) {
            case ExtendedColor.eightBit:
              expectedParts = 3;
              break;
            case ExtendedColor.rgb:
              expectedParts = 5;
              break;
            default:
              expectedParts = 1;
              break;
          }
          break;
        case void 0:
          continue;
        default:
          expectedParts = 0;
          break;
      }
      let baseCode;
      if (opcode.toString() === part) {
        baseCode = opcode;
      } else {
        baseCode = part;
      }
      if (expectedParts) {
        const codeCount = part.split(":").length;
        if (codeCount < expectedParts) {
          const argParts = expectedParts - codeCount;
          codes2.push([baseCode, ...parts.slice(pos, pos + argParts)].join(";"));
          pos += argParts;
          continue;
        }
      }
      codes2.push(baseCode);
    }
    return codes2;
  }
  Style2.codesOf = codesOf;
  function textOf(definition) {
    if (definition === void 0 || definition === "") {
      return definition;
    }
    definition = definition.trim();
    if (definition[0] === "\x1B" && definition[1] === "[") {
      definition = definition.slice(2);
    }
    if (definition[definition.length - 1] === "m") {
      definition = definition.slice(0, definition.length - 1);
    }
    return definition;
  }
  Style2.textOf = textOf;
  function definitionOf(definition) {
    if (definition !== void 0 && typeof definition !== "string" && !Array.isArray(definition)) {
      return definition.styleDefinition;
    }
    return definition;
  }
  Style2.definitionOf = definitionOf;
})(Style || (Style = {}));
Style.prototype = {
  get styleDefinition() {
    if (this[codes] !== void 0) {
      return this[codes];
    }
    if (this[text] !== void 0) {
      return this[text];
    }
  },
  set styleDefinition(definition) {
    if (typeof definition === "function" || typeof definition === "object" && !Array.isArray(definition)) {
      this.styleDefinition = definition.styleDefinition;
    } else if (typeof definition === "string") {
      this[text] = Style.textOf(definition);
      this[codes] = void 0;
    } else {
      this[codes] = definition;
      this[text] = void 0;
    }
  },
  get styleCodes() {
    if (this[codes] === void 0) {
      this[codes] = Style.codesOf(this[text]);
    }
    return this[codes] ?? [];
  },
  get styleToken() {
    return {
      kind: "style",
      // Do not use this because extension toString() may not do the correct thing
      style: Style(this.styleDefinition)
    };
  },
  get undoStyle() {
    const codes2 = Array();
    for (const code of this.styleCodes) {
      const opcode = Style.opcodeOf(code);
      if (opcode === void 0) {
        continue;
      }
      const undo = SgrOpcodeToUndoOpcode[opcode];
      if (undo === void 0) {
        continue;
      }
      codes2.push(undo);
    }
    return Style(codes2);
  },
  toString() {
    const codes2 = Array();
    for (const code of this.styleCodes) {
      const opcode = Style.opcodeOf(code);
      if (opcode === void 0) {
        continue;
      }
      codes2.push(code);
    }
    return `\x1B[${codes2.join(";")}m`;
  },
  addStyle(codes2) {
    let categories = Array();
    function processor(category, code) {
      if (category === SgrCategory.reset) {
        categories = [SgrOpcode.reset];
      } else {
        categories[category] = code;
      }
    }
    this.evaluateStyle(processor);
    codes2 = Style.definitionOf(codes2);
    if (codes2 !== void 0) {
      Style(codes2).evaluateStyle(processor);
    }
    return this.factory(
      categories.filter((entry) => entry !== void 0),
      this
    );
  },
  diffStyle(other) {
    let current = Array();
    this.evaluateStyle((category, code) => {
      if (category === SgrCategory.reset) {
        current = [];
      } else {
        current[category] = code;
      }
    });
    let target = [...current];
    other.evaluateStyle((category, code) => {
      if (category === SgrCategory.reset) {
        current = [];
        target = [SgrCategory.reset];
      } else if (current[category] === code) {
        target[category] = void 0;
      } else {
        target[category] = code;
      }
    });
    return this.factory(
      target.filter((entry) => entry !== void 0),
      this
    );
  },
  evaluateStyle(processor) {
    for (const code of this.styleCodes) {
      const opcode = Style.opcodeOf(code);
      if (opcode !== void 0) {
        const category = SgrOpcodeToCategory[opcode];
        if (category !== void 0) {
          processor(category, code);
        }
      }
    }
  },
  get factory() {
    return Style;
  },
  [Symbol.iterator]() {
    return [{ kind: "style", style: this }][Symbol.iterator]();
  }
};
Style.Inherit = Style();
Style.None = Style([0]);
export {
  Style
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL2Fuc2ktdGV4dC9zdHlsZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjItMjAyNSBNYXR0ZXIuanMgQXV0aG9yc1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgeyBQcm9kdWNlciB9IGZyb20gXCIuL3Byb2R1Y2VyLmpzXCI7XG5pbXBvcnQge1xuICAgIENvbG9yLFxuICAgIEV4dGVuZGVkQ29sb3IsXG4gICAgU2dyQ2F0ZWdvcnksXG4gICAgU2dyT3Bjb2RlLFxuICAgIFNnck9wY29kZUJsb2NrLFxuICAgIFNnck9wY29kZVRvQ2F0ZWdvcnksXG4gICAgU2dyT3Bjb2RlVG9VbmRvT3Bjb2RlLFxufSBmcm9tIFwiLi9zZ3IuanNcIjtcbmltcG9ydCB7IFRva2VuIH0gZnJvbSBcIi4vdG9rZW4uanNcIjtcblxuLyoqXG4gKiBBbiBpbW11dGFibGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQU5TSSBDU0kgU0dSIHNlcXVlbmNlLCBhbHNvIGtub3duIGFzIHRoZSBcIkFtZXJpY2FuIE5hdGlvbmFsIFN0YW5kYXJkcyBJbnN0aXR1dGVcbiAqIENvbnRyb2wgU2VxdWVuY2UgSW50cm9kdWNlciBTZWxlY3QgR3JhcGhpYyBSZW5kaXRpb25cIi5cbiAqXG4gKiBJbXBsZW1lbnRlZCBsYXJnZWx5IGZyb20gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZVxuICpcbiAqIFByb3ZpZGVzIGhpZ2ggbGV2ZWwgbG9naWMgZm9yIHBhcnNpbmcgYW5kIG1hbmlwdWxhdGluZyBzdHlsaW5nLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0eWxlIGV4dGVuZHMgUHJvZHVjZXIge1xuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGRlZmluaXRpb24sIGVpdGhlciB7QGxpbmsgY29kZXN9IG9yIHtAbGluayB0ZXh0fS5cbiAgICAgKi9cbiAgICBnZXQgc3R5bGVEZWZpbml0aW9uKCk6IFN0eWxlLkRlZmluaXRpb247XG5cbiAgICBzZXQgc3R5bGVEZWZpbml0aW9uKGRlZmluaXRpb246IFN0eWxlLklucHV0RGVmaW5pdGlvbiB8IFN0eWxlIHwgdW5kZWZpbmVkKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBsaXN0IG9mIGNvZGVzIGluIHRoaXMgc3R5bGUuXG4gICAgICovXG4gICAgc3R5bGVDb2RlczogKHN0cmluZyB8IG51bWJlcilbXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzdHlsZSBhcyBhIHN0eWxlIHRva2VuLlxuICAgICAqL1xuICAgIHN0eWxlVG9rZW46IFRva2VuO1xuXG4gICAgLyoqXG4gICAgICogQSBzdHlsZSB0aGF0IGRpc2FibGVzIHRoaXMgc3R5bGUuXG4gICAgICovXG4gICAgdW5kb1N0eWxlOiBTdHlsZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgQU5TSSBlc2NhcGUgc2VxdWVuY2UgZm9yIHRoaXMgc3R5bGUuXG4gICAgICovXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHN0eWxlIGJ5IGFkZGluZyBhZGRpdGlvbmFsIHN0eWxlIGluZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIGFkZFN0eWxlPFQgZXh0ZW5kcyBTdHlsZT4odGhpczogVCwgc3R5bGU6IFN0eWxlLklucHV0RGVmaW5pdGlvbiB8IFN0eWxlKTogVDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN0eWxlIHRoYXQgdHJhbnNpdGlvbnMgZnJvbSB0aGlzIHN0eWxlIHRvIGFub3RoZXIuXG4gICAgICovXG4gICAgZGlmZlN0eWxlPFQgZXh0ZW5kcyBTdHlsZT4odGhpczogVCwgb3RoZXI6IFN0eWxlKTogVDtcblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgYSBmdW5jdGlvbiBhZ2FpbnN0IGVhY2ggY29kZSBpbiB0aGlzIHN0eWxlJ3Mgc2VxdWVuY2UuXG4gICAgICovXG4gICAgZXZhbHVhdGVTdHlsZShwcm9jZXNzb3I6IChjYXRlZ29yeTogU2dyQ2F0ZWdvcnksIGNvZGU6IG51bWJlciB8IHN0cmluZykgPT4gdm9pZCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZmFjdG9yeSB1c2VkIHRvIGNyZWF0ZSB0aGlzIHN0eWxlLlxuICAgICAqL1xuICAgIGZhY3Rvcnk6IFN0eWxlLkZhY3Rvcnk7XG59XG5cbmNvbnN0IGNvZGVzID0gU3ltYm9sKFwiY29kZXNcIik7XG5jb25zdCB0ZXh0ID0gU3ltYm9sKFwidGV4dFwiKTtcblxuaW50ZXJmYWNlIEludGVybmFsU3R5bGUgZXh0ZW5kcyBTdHlsZSB7XG4gICAgW2NvZGVzXT86IChzdHJpbmcgfCBudW1iZXIpW107XG4gICAgW3RleHRdPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU3R5bGUoZGVmaW5pdGlvbj86IFN0eWxlLklucHV0RGVmaW5pdGlvbik6IFN0eWxlIHtcbiAgICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIFN0eWxlKSB7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlID0gT2JqZWN0LmNyZWF0ZShTdHlsZS5wcm90b3R5cGUpIGFzIFN0eWxlO1xuXG4gICAgc3R5bGUuc3R5bGVEZWZpbml0aW9uID0gU3R5bGUuZGVmaW5pdGlvbk9mKGRlZmluaXRpb24pO1xuXG4gICAgcmV0dXJuIHN0eWxlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFN0eWxlIHtcbiAgICBleHBvcnQgdHlwZSBGYWN0b3J5ID0gKGRlZmluaXRpb24/OiBEZWZpbml0aW9uIHwgU3R5bGUsIGRlcml2ZXNGcm9tPzogU3R5bGUpID0+IFN0eWxlO1xuICAgIGV4cG9ydCB0eXBlIERlZmluaXRpb24gPSB1bmRlZmluZWQgfCBzdHJpbmcgfCAoc3RyaW5nIHwgbnVtYmVyKVtdO1xuICAgIGV4cG9ydCB0eXBlIElucHV0RGVmaW5pdGlvbiA9IERlZmluaXRpb24gfCB7IHN0eWxlRGVmaW5pdGlvbjogRGVmaW5pdGlvbiB9O1xuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG9wY29kZU9mKGNvZGU6IG51bWJlciB8IHN0cmluZykge1xuICAgICAgICBpZiAodHlwZW9mIGNvZGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvZGUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm90ZSB3ZSBtdXN0IHVzZSBwYXJzZUludCBzbyB0cmFpbGluZyBwYXJhbWV0ZXJzIGFyZSBzdHJpcHBlZFxuICAgICAgICBjb25zdCBvcGNvZGUgPSBOdW1iZXIucGFyc2VJbnQoY29kZSk7XG4gICAgICAgIGlmIChOdW1iZXIuaXNOYU4ob3Bjb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcGNvZGU7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNvZGVzT2YoZGVmaW5pdGlvbj86IHN0cmluZyk6IChudW1iZXIgfCBzdHJpbmcpW10ge1xuICAgICAgICBkZWZpbml0aW9uID0gdGV4dE9mKGRlZmluaXRpb24pO1xuICAgICAgICBpZiAoZGVmaW5pdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluaXRpb24gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbMF07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJ0cyA9IGRlZmluaXRpb24uc3BsaXQoXCI7XCIpO1xuICAgICAgICBjb25zdCBjb2RlcyA9IEFycmF5PHN0cmluZyB8IG51bWJlcj4oKTtcbiAgICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICAgIHdoaWxlIChwb3MgPCBwYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1twb3NdO1xuICAgICAgICAgICAgY29uc3Qgb3Bjb2RlID0gb3Bjb2RlT2YocGFydHNbcG9zXSk7XG4gICAgICAgICAgICBwb3MrKztcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBtYW55IGFyZ3VtZW50cyB0aGUgY29kZSBoYXMuICBXZSBlbmNvZGUgdGhlc2UgYXMgYSBzaW5nbGUgdW5pdFxuICAgICAgICAgICAgbGV0IGV4cGVjdGVkUGFydHM7XG4gICAgICAgICAgICBzd2l0Y2ggKG9wY29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgU2dyT3Bjb2RlQmxvY2suZmcgKyBDb2xvci5leHRlbmRlZDpcbiAgICAgICAgICAgICAgICBjYXNlIFNnck9wY29kZUJsb2NrLmJnICsgQ29sb3IuZXh0ZW5kZWQ6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3Bjb2RlT2YocGFydHNbcG9zXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXh0ZW5kZWRDb2xvci5laWdodEJpdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFBhcnRzID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFeHRlbmRlZENvbG9yLnJnYjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFBhcnRzID0gNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3Qgc3VyZSB3aGF0IHRvIG1ha2Ugb2YgdGhpczsganVzdCBncmFiIHRoZSB0d28gcHJlZml4IGNvZGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRQYXJ0cyA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRQYXJ0cyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgb3JpZ2luYWwgY29kZSBhcyBhIG51bWJlciBpZiBpdCBpcyBlbmNvZGVkIGFzIGFuIGludGVnZXIgd2l0aG91dCBhcmd1bWVudHNcbiAgICAgICAgICAgIGxldCBiYXNlQ29kZTogbnVtYmVyIHwgc3RyaW5nO1xuICAgICAgICAgICAgaWYgKG9wY29kZS50b1N0cmluZygpID09PSBwYXJ0KSB7XG4gICAgICAgICAgICAgICAgYmFzZUNvZGUgPSBvcGNvZGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJhc2VDb2RlID0gcGFydDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQXJndW1lbnRzIG1heSBiZSBlbmNvZGVkIGluIGEgc2luZ2xlIGNvZGUgd2l0aCBcIjpcIiBhcyBzZXBhcmF0b3IsIG9yIGFzIHNlcGFyYXRlIGNvZGVzIGlmIFwiO1wiIGlzXG4gICAgICAgICAgICAvLyB0aGUgc2VwYXJhdG9yLiAgVW5zdXJlIHdoZXJlIHdoaWNoIGlzIHN1cHBvcnRlZCBzbyB3ZSBqdXN0IGhhbmRsZSBib3RoXG4gICAgICAgICAgICBpZiAoZXhwZWN0ZWRQYXJ0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGVDb3VudCA9IHBhcnQuc3BsaXQoXCI6XCIpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY29kZUNvdW50IDwgZXhwZWN0ZWRQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAvLyBBdCBsZWFzdCBzb21lIGFyZ3MgYXJlIGluIHN1YnNlcXVlbnQgY29kZXM7IGpvaW4gdGhlc2UgdG9nZXRoZXIgdXNpbmcgb3JpZ2luYWwgc2VwYXJhdG9yIHNvXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXkgc2VyaWFsaXplIGluIG9yaWdpbmFsIGZvcm1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJnUGFydHMgPSBleHBlY3RlZFBhcnRzIC0gY29kZUNvdW50O1xuICAgICAgICAgICAgICAgICAgICBjb2Rlcy5wdXNoKFtiYXNlQ29kZSwgLi4ucGFydHMuc2xpY2UocG9zLCBwb3MgKyBhcmdQYXJ0cyldLmpvaW4oXCI7XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zICs9IGFyZ1BhcnRzO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5vIGFyZ3Mgb3IgYWxsIGFyZ3MgZW5jb2RlZCB1c2luZyBcIjpcIiBzZXBhcmF0b3JcbiAgICAgICAgICAgIGNvZGVzLnB1c2goYmFzZUNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2RlcztcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gdGV4dE9mKGRlZmluaXRpb24/OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGRlZmluaXRpb24gPT09IHVuZGVmaW5lZCB8fCBkZWZpbml0aW9uID09PSBcIlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBkZWZpbml0aW9uID0gZGVmaW5pdGlvbi50cmltKCk7XG4gICAgICAgIGlmIChkZWZpbml0aW9uWzBdID09PSBcIlxceDFiXCIgJiYgZGVmaW5pdGlvblsxXSA9PT0gXCJbXCIpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24gPSBkZWZpbml0aW9uLnNsaWNlKDIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWZpbml0aW9uW2RlZmluaXRpb24ubGVuZ3RoIC0gMV0gPT09IFwibVwiKSB7XG4gICAgICAgICAgICBkZWZpbml0aW9uID0gZGVmaW5pdGlvbi5zbGljZSgwLCBkZWZpbml0aW9uLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWZpbml0aW9uT2YoZGVmaW5pdGlvbjogSW5wdXREZWZpbml0aW9uKTogRGVmaW5pdGlvbiB7XG4gICAgICAgIGlmIChkZWZpbml0aW9uICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGRlZmluaXRpb24gIT09IFwic3RyaW5nXCIgJiYgIUFycmF5LmlzQXJyYXkoZGVmaW5pdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uLnN0eWxlRGVmaW5pdGlvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICB9XG5cbiAgICBkZWNsYXJlIGNvbnN0IEluaGVyaXQ6IFN0eWxlO1xuICAgIGRlY2xhcmUgY29uc3QgTm9uZTogU3R5bGU7XG59XG5cblN0eWxlLnByb3RvdHlwZSA9IHtcbiAgICBnZXQgc3R5bGVEZWZpbml0aW9uKCk6IFN0eWxlLkRlZmluaXRpb24ge1xuICAgICAgICBpZiAodGhpc1tjb2Rlc10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbY29kZXNdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzW3RleHRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzW3RleHRdO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHNldCBzdHlsZURlZmluaXRpb24oZGVmaW5pdGlvbjogU3R5bGUuSW5wdXREZWZpbml0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGVmaW5pdGlvbiA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgZGVmaW5pdGlvbiA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShkZWZpbml0aW9uKSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVEZWZpbml0aW9uID0gZGVmaW5pdGlvbi5zdHlsZURlZmluaXRpb247XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluaXRpb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXNbdGV4dF0gPSBTdHlsZS50ZXh0T2YoZGVmaW5pdGlvbik7XG4gICAgICAgICAgICB0aGlzW2NvZGVzXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNbY29kZXNdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgICAgIHRoaXNbdGV4dF0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0IHN0eWxlQ29kZXMoKSB7XG4gICAgICAgIGlmICh0aGlzW2NvZGVzXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzW2NvZGVzXSA9IFN0eWxlLmNvZGVzT2YodGhpc1t0ZXh0XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNbY29kZXNdID8/IFtdO1xuICAgIH0sXG5cbiAgICBnZXQgc3R5bGVUb2tlbigpOiBUb2tlbiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiBcInN0eWxlXCIsXG5cbiAgICAgICAgICAgIC8vIERvIG5vdCB1c2UgdGhpcyBiZWNhdXNlIGV4dGVuc2lvbiB0b1N0cmluZygpIG1heSBub3QgZG8gdGhlIGNvcnJlY3QgdGhpbmdcbiAgICAgICAgICAgIHN0eWxlOiBTdHlsZSh0aGlzLnN0eWxlRGVmaW5pdGlvbiksXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIGdldCB1bmRvU3R5bGUoKSB7XG4gICAgICAgIGNvbnN0IGNvZGVzID0gQXJyYXk8bnVtYmVyPigpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGhpcy5zdHlsZUNvZGVzKSB7XG4gICAgICAgICAgICBjb25zdCBvcGNvZGUgPSBTdHlsZS5vcGNvZGVPZihjb2RlKTtcbiAgICAgICAgICAgIGlmIChvcGNvZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB1bmRvID0gU2dyT3Bjb2RlVG9VbmRvT3Bjb2RlW29wY29kZV07XG4gICAgICAgICAgICBpZiAodW5kbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvZGVzLnB1c2godW5kbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0eWxlKGNvZGVzKTtcbiAgICB9LFxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGNvZGVzID0gQXJyYXk8bnVtYmVyIHwgc3RyaW5nPigpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGhpcy5zdHlsZUNvZGVzKSB7XG4gICAgICAgICAgICBjb25zdCBvcGNvZGUgPSBTdHlsZS5vcGNvZGVPZihjb2RlKTtcbiAgICAgICAgICAgIGlmIChvcGNvZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb2Rlcy5wdXNoKGNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgXFx4MWJbJHtjb2Rlcy5qb2luKFwiO1wiKX1tYDtcbiAgICB9LFxuXG4gICAgYWRkU3R5bGU8VCBleHRlbmRzIFN0eWxlPih0aGlzOiBULCBjb2RlczogU3R5bGUuSW5wdXREZWZpbml0aW9uKTogVCB7XG4gICAgICAgIGxldCBjYXRlZ29yaWVzID0gQXJyYXk8bnVtYmVyIHwgc3RyaW5nPigpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NvcihjYXRlZ29yeTogU2dyQ2F0ZWdvcnksIGNvZGU6IG51bWJlciB8IHN0cmluZykge1xuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09PSBTZ3JDYXRlZ29yeS5yZXNldCkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBbU2dyT3Bjb2RlLnJlc2V0XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllc1tjYXRlZ29yeV0gPSBjb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIG15IGNvZGVzXG4gICAgICAgIHRoaXMuZXZhbHVhdGVTdHlsZShwcm9jZXNzb3IpO1xuXG4gICAgICAgIC8vIE92ZXJ3cml0ZSB3aXRoIG5ldyBjb2Rlc1xuICAgICAgICBjb2RlcyA9IFN0eWxlLmRlZmluaXRpb25PZihjb2Rlcyk7XG4gICAgICAgIGlmIChjb2RlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBTdHlsZShjb2RlcykuZXZhbHVhdGVTdHlsZShwcm9jZXNzb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZmFjdG9yeShcbiAgICAgICAgICAgIGNhdGVnb3JpZXMuZmlsdGVyKGVudHJ5ID0+IGVudHJ5ICE9PSB1bmRlZmluZWQpLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgKSBhcyBUO1xuICAgIH0sXG5cbiAgICBkaWZmU3R5bGU8VCBleHRlbmRzIFN0eWxlPih0aGlzOiBULCBvdGhlcjogU3R5bGUpOiBUIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBBcnJheTxudW1iZXIgfCBzdHJpbmcgfCB1bmRlZmluZWQ+KCk7XG5cbiAgICAgICAgLy8gQ29sbGVjdCBjdXJyZW50IHN0eWxlcyBieSBjYXRlZ29yeS4gIFJlc2V0IGNsZWFycyBzdGF0ZVxuICAgICAgICB0aGlzLmV2YWx1YXRlU3R5bGUoKGNhdGVnb3J5OiBTZ3JDYXRlZ29yeSwgY29kZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT09IFNnckNhdGVnb3J5LnJlc2V0KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IFtdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50W2NhdGVnb3J5XSA9IGNvZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENvbGxlY3QgdGFyZ2V0IHN0eWxlIGJ5IGNhdGVnb3J5LiAgUmVzZXQgY2xlYXJzIGN1cnJlbnQgKGJlY2F1c2UgaXRzIG5vIGxvbmdlciByZWxldmFudCkgYW5kIGFkZHMgdGhlXG4gICAgICAgIC8vIHJlc2V0IHdoaWNoIGFsd2F5cyBzZXJpYWxpemVzIGZpcnN0XG4gICAgICAgIGxldCB0YXJnZXQgPSBbLi4uY3VycmVudF07XG4gICAgICAgIG90aGVyLmV2YWx1YXRlU3R5bGUoKGNhdGVnb3J5LCBjb2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT09IFNnckNhdGVnb3J5LnJlc2V0KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IFtdO1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IFtTZ3JDYXRlZ29yeS5yZXNldF07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRbY2F0ZWdvcnldID09PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2NhdGVnb3J5XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2NhdGVnb3J5XSA9IGNvZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRhcmdldCBub3cgY29udGFpbnMgb25seSB0aG9zZSBjb2RlcyByZXF1aXJlZCB0byBwZXJmb3JtIHRyYW5zaXRpb25cbiAgICAgICAgcmV0dXJuIHRoaXMuZmFjdG9yeShcbiAgICAgICAgICAgIHRhcmdldC5maWx0ZXIoZW50cnkgPT4gZW50cnkgIT09IHVuZGVmaW5lZCksXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICApIGFzIFQ7XG4gICAgfSxcblxuICAgIGV2YWx1YXRlU3R5bGUocHJvY2Vzc29yOiAoY2F0ZWdvcnk6IFNnckNhdGVnb3J5LCBjb2RlOiBudW1iZXIgfCBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRoaXMuc3R5bGVDb2Rlcykge1xuICAgICAgICAgICAgY29uc3Qgb3Bjb2RlID0gU3R5bGUub3Bjb2RlT2YoY29kZSk7XG4gICAgICAgICAgICBpZiAob3Bjb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IFNnck9wY29kZVRvQ2F0ZWdvcnlbb3Bjb2RlXTtcbiAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzb3IoY2F0ZWdvcnksIGNvZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXQgZmFjdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIFN0eWxlO1xuICAgIH0sXG5cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIFt7IGtpbmQ6IFwic3R5bGVcIiwgc3R5bGU6IHRoaXMgYXMgU3R5bGUgfSBzYXRpc2ZpZXMgVG9rZW5dW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICB9LFxufSBzYXRpc2ZpZXMgUGljazxJbnRlcm5hbFN0eWxlLCBrZXlvZiBJbnRlcm5hbFN0eWxlPjtcblxuU3R5bGUuSW5oZXJpdCA9IFN0eWxlKCk7XG5TdHlsZS5Ob25lID0gU3R5bGUoWzBdKTtcbiJdLAogICJtYXBwaW5ncyI6ICJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUFBLEVBQ0k7QUFBQSxF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
